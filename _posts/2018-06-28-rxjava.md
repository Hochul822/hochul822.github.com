---
layout: post
title: "[RxJava] 기본 개념 정리"
date: 2018-06-28 16:53:52
image:
description: "RxJava의 기본 개념을 알아봅시다."
category: 'android'
tags:
- app
- android
- rxjava
twitter_text: twitter text
introduction: hochul instroduction
---

### RxJava 정리

RxJava를 쓰다보면 헷갈리는 개념들이 있다.
주의 깊게 생각하지 않으면 놓치게 되는 것들인데 이번 기회에 정리를 해보려한다.


### Reactive 프로그래밍의 시작
RxJava는 Reactive 프로그래밍의 한 분파이다. Reactive 프로그래밍은 멀티 스레딩과 네트워크 환경에서 데이터를 처리(비동기)하기 위해 생겨났다. 멀티 스레딩 환경에서는 어떤 데이터를 먼저 가져와야할지, 어디가 처리가 끝났는지 확인하기가 쉽지 않다. 네트워크 환경에서는 데이터 송수신이 끝날 때까지의 처리, 통신 에러에 따른 처리를 해야하는데, 사용자의 네트워크 상황은 수시로 바뀌기에 이또한 해결하기가 쉬운 문제는 아니다.

두 문제에 대한 해결책으로 나온 게 Reactive 프로그래밍이다.
Reactive 프로그래밍은 데이터의 흐름을 처리하는 새로운 방법이다.

### Reactive 프로그래밍이란?
Reactive 프로그래밍은 간단히 말해, 데이터가 있으면 반응을 하고, 없으면 반응을 하지 않는 것이다. 예컨데 온도계가 25도에서 28도로 올랐을때만 온도 변화를 보여주고, 변하지 않았을 때는 보여주지 않거나, https를 통해 새로운 json 파일이 들어왔을 때만 UI를 바꿔준다든지 하는 식이다.


#### Observable(Source) vs Observer
RxJava의 가장 큰 특징은 데이터를 생산하는 곳이 따로 있고, 처리하고 있는 곳이 따로 있단 것이다. 데이터의 원천, 생산하는 곳을 Observable이라고 하고, 데이터를 처리하는 일을 하는 걸 Observer라고 한다.

언제 터질지 모르는 휴화산을 생각해보자. 화산 꼭대기는 관찰해야 하는 대상(Observable)이 될 거고, 마을 주민들은 관찰자(Observer)가 될것이다.




#### Subscribe(구독)이란?


#### Hot, Cold Observable의 차이 및 예시

hot observable - 구독과 상관없이 계속 데이터 생산
cold observable - 구독할 때만 데이터가 흘러들어옴



#### backpressure drop, backpressure buffer
- rxjava에서 흐름 제어를 할 때 필요하다.
- drop의 경우 일정량 이상의 데이터는 무시하고
- buffer는 subscribe할때까지 쌓아둔다.
- BackpressureStrategy는 5가지가 있는데 이에 따라 흐름을 처리하는 방식이 달라진다
  - LATEST : 가장 최근 데이터만
  - BUFFER : 다 쌓아둔다
  - DROP : 일정량만 쌓아두고 나머지는 버림
  - ERROR, MISSING


#### Flowable vs Observable
- BackPressureDrop을 위해서는 무조건 Flowable을 사용해주어야한다.
- Observable은 Backpressure를 지원하지 않는다.
- cold observable vs hot observable
  - cold의 경우에는 Observable을 사용해도 overflowing으로부터 안전하다.
  - hot의 경우에는 안 쓰는 게 좋은데, observable의 consumer가 (많은 처리량을) 감당할 수 없을 수 있기 때문이다.


#### Maybe
- 값이 있으면 onSuccess 호출
- 값이 없으면 onComplete 호출

#### Single, Completable
- 값을 한개만 받을 때는 Single
  - Single은 OnSuccess 혹은 onError만 쓸 수 있는 타입이다.
- 값을 받지 않을 때는 Completable
  - Completable은 onComplete 혹은 onError만 쓸 수 있는 타입이다.
  - 의미없는 값을 return해야 될때 쓰면, onComplete가 강제되니 무의미한 return을 줄 일 수 있어 좋다
  - 예 : firebase에서 저장을 하고나서, 저장 확인용 onNext를 쓴 적 있는데 completable로 바꿔주면 좋지 않을까?


// TODO 예시 코드 추가
